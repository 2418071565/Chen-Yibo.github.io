
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../../../DS/Block/Block/">
      
      
        <link rel="next" href="../../ConvexHull/CH/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.11">
    
    
      
        <title>二维计算几何基础 - CYB</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../.." title="CYB" class="md-header__button md-logo" aria-label="CYB" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CYB
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              二维计算几何基础
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/2418071565/Chen-Yibo.github.io.git" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../Algorithm/BinaryLifting/BinaryLifting/" class="md-tabs__link">
          
  
  ACM

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="CYB" class="md-nav__button md-logo" aria-label="CYB" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CYB
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/2418071565/Chen-Yibo.github.io.git" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ACM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            ACM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1" >
        
          
          <label class="md-nav__link" for="__nav_1_1" id="__nav_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    算法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1">
            <span class="md-nav__icon md-icon"></span>
            算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/BinaryLifting/BinaryLifting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    倍增
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_1_2" id="__nav_1_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    排序
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1_2">
            <span class="md-nav__icon md-icon"></span>
            排序
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/Sort/BubbleSort/Bubble/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    冒泡排序
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    字符串
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            字符串
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../String/KMP/KMP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KMP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../String/Manacher/Manacher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    马拉车
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../String/StringHash/StringHash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    字符串哈希
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../String/Trie/Trie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    字典树
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据结构
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            数据结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DS/Heap/BinHp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    二叉堆
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DS/UnionFind/UF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    并查集
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DS/HTable/HTable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    哈希表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DS/BIT/BIT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    树状数组
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DS/SegTr/SegTr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    线段树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DS/Block/Block/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分块
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数学
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            数学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1_4_1" id="__nav_1_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    计算几何
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_4_1">
            <span class="md-nav__icon md-icon"></span>
            计算几何
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    二维计算几何基础
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    二维计算几何基础
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      点
    </span>
  </a>
  
    <nav class="md-nav" aria-label="点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      二维向量
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二维向量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      向量运算
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      点到点的距离
    </span>
  </a>
  
    <nav class="md-nav" aria-label="点到点的距离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      欧式距离
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      曼哈顿距离
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      点到直线的距离
    </span>
  </a>
  
    <nav class="md-nav" aria-label="点到直线的距离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      公式法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      向量法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      点到线段的距离
    </span>
  </a>
  
    <nav class="md-nav" aria-label="点到线段的距离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      点与线段的位置关系
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      求点到线段的距离
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      利用向量求三角形面积
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      直线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="直线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      求两直线交点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      线段
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线段">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      求线段的交点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ConvexHull/CH/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    凸包
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_2" >
        
          
          <label class="md-nav__link" for="__nav_1_4_2" id="__nav_1_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数论
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_2">
            <span class="md-nav__icon md-icon"></span>
            数论
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../NumberTheory/Fd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数论基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../NumberTheory/Qpow/qpow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    快速幂
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../NumberTheory/Inv/Inv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    乘法逆元
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_3" >
        
          
          <label class="md-nav__link" for="__nav_1_4_3" id="__nav_1_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数值计算
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            数值计算
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Numerical/NtsMethod/Nt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    牛顿迭代法
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      点
    </span>
  </a>
  
    <nav class="md-nav" aria-label="点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      二维向量
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二维向量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      向量运算
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      点到点的距离
    </span>
  </a>
  
    <nav class="md-nav" aria-label="点到点的距离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      欧式距离
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      曼哈顿距离
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      点到直线的距离
    </span>
  </a>
  
    <nav class="md-nav" aria-label="点到直线的距离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      公式法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      向量法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      点到线段的距离
    </span>
  </a>
  
    <nav class="md-nav" aria-label="点到线段的距离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      点与线段的位置关系
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      求点到线段的距离
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      利用向量求三角形面积
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      直线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="直线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      求两直线交点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      线段
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线段">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      求线段的交点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="_1">二维计算几何基础</h1>
<h2 id="_2"><strong>点</strong></h2>
<p>平面直角坐标系下的点，一般用一个结构体来维护其横纵坐标 <span class="arithmatex">\(x,y\)</span>。与其说是点，不如说它是一个二维向量。因为我们常常会直接拿两个点做向量加减运算，得到我们想要的向量。</p>
<h3 id="_3"><strong>二维向量</strong></h3>
<p>由于向量的坐标表示与点相同，所以只需要像点一样存向量即可（当然点不是向量）。</p>
<h4 id="_4"><strong>向量运算</strong></h4>
<ul>
<li><strong>向量加减</strong></li>
</ul>
<p>就是向量坐标对应位置的值进行加减即可。</p>
<pre><code class="language-cpp">// 向量+
Point Point::operator+(const Point &amp;a) const 
{
    return Point{x + a.x, y + a.y}; 
}
// 向量-
Point Point::operator-(const Point &amp;a) const
{ 
    return p{x - a.x, y - a.y}; 
}
</code></pre>
<p>向量加减的几何意义通过下面两图很好理解：</p>
<figure>
  <img alt="Image title" src="../img/06.png" width="500" />
</figure>
<!-- <div align="center"><img src="./img/06.png"width="500"></div> -->

<ul>
<li><strong>点乘（内积）</strong></li>
</ul>
<p>我们知道点乘的结果是一个数，其几何意义为 <span class="arithmatex">\(\vec{b}\)</span> 在 <span class="arithmatex">\(\vec{a}\)</span> 上的投影与 <span class="arithmatex">\(|\vec{a}|\)</span> 的乘积。</p>
<p>计算公式：</p>
<div class="arithmatex">\[
\vec{a}\cdot \vec{b}=|\vec{a}|\cdot|\vec{b}|\cos{\theta}
\]</div>
<p>换成坐标的形式，那么 <span class="arithmatex">\(\vec{a}=(x_1.y_1)\)</span>，<span class="arithmatex">\(\vec{b}=(x_2.y_2)\)</span> 点乘就是对应坐标相乘：</p>
<div class="arithmatex">\[
\vec{a}\cdot \vec{b}=x_1x_2+y_1y_2
\]</div>
<pre><code class="language-cpp">// 我们将点乘重载为 | 符号
double Point::operator|(const Point &amp;a) const 
{ 
    return x * a.x + y * a.y; 
} // 点乘
</code></pre>
<ul>
<li><strong>叉乘（外积）</strong></li>
</ul>
<p>叉乘的结果是一个向量，其方向遵循右手法则。叉乘结果的模是由两个向量围成的平行四边的面积。</p>
<figure>
  <img alt="Image title" src="../img/03.png" width="250" />
</figure>
<!-- <div align="center"><img src="./img/03.png"width="250"></div> -->

<p>叉乘模的计算公式：</p>
<div class="arithmatex">\[
\vec{a}\times \vec{b}=|\vec{a}||\vec{b}|\sin{\theta}
\]</div>
<p>换成坐标形式，那么 <span class="arithmatex">\(\vec{a}=(x_1.y_1)\)</span>，<span class="arithmatex">\(\vec{b}=(x_2.y_2)\)</span> 叉乘就是坐标交叉相乘：</p>
<div class="arithmatex">\[
\vec{a}\times \vec{b}=x_1xy_2-x_1y_2
\]</div>
<pre><code class="language-cpp">double Point::operator*(const Point &amp;a) const 
{ 
    return x * a.y - y * a.x; 
} // 叉乘
</code></pre>
<p>利用坐标在程序中运算点乘叉乘，对于判断几何位置关系时非常有用。</p>
<ul>
<li><strong>向量取模</strong></li>
</ul>
<p>向量取模就是取向量的长度。我们可以将任何一个向量平移到远点，那么向量 <span class="arithmatex">\(\vec{a}=(x,y)\)</span> 的长度就是点 <span class="arithmatex">\((x,y)\)</span> 到原点的距离。</p>
<div class="arithmatex">\[
|a|=\sqrt{x^2+y^2}
\]</div>
<p>我们可以计算向量和自己的点乘再开平方即可</p>
<pre><code class="language-cpp">// 向量取平方
double Point::pow() const 
{ 
    return x * x + y * y; 
}                    
// 向量取模
double abs(const Point &amp;p) 
{ 
    return sqrt(p.pow()); 
}
</code></pre>
<h3 id="_5"><strong>点到点的距离</strong></h3>
<p>两个点之间的距离有两种定义法：<strong>曼哈顿距离，欧式距离</strong>。</p>
<h4 id="_6"><strong>欧式距离</strong></h4>
<p>其中欧式距离（欧几里德距离）就是直线距离。点 <span class="arithmatex">\(A(x_1,y_1),B(x_2,y_2)\)</span> 的欧式距离为：</p>
<div class="arithmatex">\[
|AB|=\sqrt{(x_1-x_2)^2+(y _1-y_2)^2}
\]</div>
<pre><code class="language-cpp">// 点到点的欧式距离
double Point::disPoint(const Point &amp;a) const
{
    return sqrt((x - a.x) * (x - a.x) + (y - a.y) * (y - a.y));
}
</code></pre>
<h4 id="_7"><strong>曼哈顿距离</strong></h4>
<p>在二维空间内，两个点之间的曼哈顿距离为它们横坐标之差的绝对值与纵坐标之差的绝对值之和。点 <span class="arithmatex">\(A(x_1,y_1),B(x_2,y_2)\)</span> 的曼哈顿距离为：</p>
<div class="arithmatex">\[
d(A,B) = |x_1-x_2|+|y_1-y_2|
\]</div>
<h3 id="_8"><strong>点到直线的距离</strong></h3>
<h4 id="_9"><strong>公式法</strong></h4>
<p>已知直线 <span class="arithmatex">\(l\)</span> 方程为 <span class="arithmatex">\(ax+by+c=0\)</span>，平面上任意一点 <span class="arithmatex">\((x_0,y_0)\)</span> 到该直线距离 <span class="arithmatex">\(d\)</span> 为:</p>
<div class="arithmatex">\[
d = \frac{|ax_0+by_0+c|}{\sqrt{a^2+b^2}}
\]</div>
<h4 id="_10">向量法</h4>
<p>我们也可以通过向量叉乘得到点到直线的距离公式。我们以点 <span class="arithmatex">\(p\)</span> 到直线 <span class="arithmatex">\(ab\)</span> 为例。我们可以通过坐标计算出向量 <span class="arithmatex">\(\vec{ap},\vec{ab}\)</span> 和它们叉乘的模。</p>
<p>因为叉乘的模是对应向量所围成平行四边形的面积，而<span class="arithmatex">\(\left | \vec{ab} \right |\)</span>是底边长度，面积除以底就是高，就可以得到对应距离。</p>
<figure>
  <img alt="Image title" src="../img/02.png" width="300" />
</figure>
<!-- <div align="center"><img src="./img/02.png"width="400"></div> -->

<p>很容易就可以写出下面的公式：</p>
<div class="arithmatex">\[
d=\frac{\left | \vec{ap}\times \vec{ab} \right | }{\left | \vec{ab}\right |}
\]</div>
<p>因为一般题目只会给我们一些点做数据，所以我们一般采用这个方法计算点到直线的距离 <span class="arithmatex">\(d\)</span> 更方便。</p>
<pre><code class="language-cpp">// 点到直线的距离
// a,b为直线上两点
double Point::disline(const Point &amp;a, const Point &amp;b) const
{
    Point ap = (*this) - a, ab = b - a;
    return abs(ap * ab) / abs(ab);
}
</code></pre>
<h3 id="_11"><strong>点到线段的距离</strong></h3>
<p>求点到线段的距离就要先判断点和线段的位置关系，才能计算点到线段的距离。</p>
<h4 id="_12"><strong>点与线段的位置关系</strong></h4>
<p>首先我们设一个点 <span class="arithmatex">\(p\)</span> 和一个线段 <span class="arithmatex">\(s_{a,b}\)</span> ，其中 <span class="arithmatex">\(a,b\)</span> 是线段的端点。</p>
<p>我们可以将点和线段的位置关系分为以下四种，我们可以通过向量的点积叉积来判断具体位置关系：</p>
<figure>
  <img alt="Image title" src="../img/01.png" width="500" />
</figure>
<!-- 
<div align="center"><img src="./img/01.png"width="500"></div> -->

<p>我们很容易发现当点在 <span class="arithmatex">\(3，4\)</span> 区域时，点和线段的夹角总是有一个钝角(<span class="arithmatex">\(\angle pab\space or \space \angle pba\)</span>)，我们可以通过计算这两个角的 <span class="arithmatex">\(\cos\)</span> 值的正负来判断他们中是否有钝角。余弦值计算公式可以由向量点积推导出来：</p>
<div class="arithmatex">\[
\cos{\theta}=\frac{\vec{ab}\cdot \vec{ap}}{|\vec{ab}||\vec{ap}|}
\]</div>
<p>应为两个向量的模的乘积一定为整数，所以只需判断两个向量点积的正负。</p>
<p>判断完余弦正负后，如果两个角都是锐角，则点就可能在 <span class="arithmatex">\(1\)</span> 或 <span class="arithmatex">\(2\)</span> 区域，这时我们就要判断 <span class="arithmatex">\(\angle{pab}\)</span> 是正角还是负角，也就是判断 <span class="arithmatex">\(\sin{\theta}\)</span> 的正负。我们通过向量叉积可以推导出正弦的计算公式：</p>
<div class="arithmatex">\[
\sin{\theta}=\frac{\vec{a}\times \vec{b}}{|\vec{a}||\vec{b}|}
\]</div>
<p>和余弦类似的，我们只需要计算两个向量的叉积的结果的正负即可。正数就在 <span class="arithmatex">\(1\)</span> 区域，负数在 <span class="arithmatex">\(2\)</span> 区域，为 <span class="arithmatex">\(0\)</span> 则在线段上。</p>
<h4 id="_13"><strong>求点到线段的距离</strong></h4>
<p>判断完点和线段的位置关系之后，计算点到线段的距离就很简单了。</p>
<p>当点在<span class="arithmatex">\(3，4\)</span>区域时，点到线段的距离就是到其端点的距离，在<span class="arithmatex">\(1，2\)</span>区域时，点到线段的距离就是到对应直线的距离。套用上文的公式即可。</p>
<pre><code class="language-cpp">// 点到线段的距离
// a,b线段两端点
double Point::disSeg(const Point &amp;a, const Point &amp;b) const
{
    // 判断点和线段的位置关系
    if ((((*this) - a) | (b - a)) &lt;= -eps || (((*this) - b) | (a - b)) &lt;= -eps)
        return min(disPoint(a), disPoint(b));
    return disline(a, b);
}
</code></pre>
<h3 id="_14"><strong>利用向量求三角形面积</strong></h3>
<p>我们了解的三角形面积公式有</p>
<div class="arithmatex">\[
\begin{cases}
s=\frac{ah}{2} \\
 s=\frac{ab\sin \theta }{2}\\
s=\sqrt[]{p(p-a)(p-b)(p-c)} ,(p=\frac{a+b+c}{2} )  
\end{cases}
\]</div>
<p>而当给定三个顶点坐标<span class="arithmatex">\(a=(x_1,y_1),b=(x_2,y_2),b=(x_3,y_3)\)</span>，求三角形面积，对计算机而言下面这个公式是最合适的：</p>
<div class="arithmatex">\[
s=\frac{(x_2-x_1)(y_3-y_1)-(y_2-y_1)(x_3-x_1)}{2}
\]</div>
<p>众所周知，这个公式是由向量叉乘的来的，即我们求出向量<span class="arithmatex">\(\vec{ab}，\vec{ac}\)</span>，二维向量叉乘的模的是以<span class="arithmatex">\(ab，ac\)</span>为两条边，所围成的平行四边形面积，我们求得<span class="arithmatex">\(ab，ac\)</span>，令其取二分之一即可得到上式</p>
<pre><code class="language-cpp">double triangle(Point &amp;a, Point &amp;b, Point &amp;c) 
{ 
    return (b - a) * (b - c) / 2.0; 
} // 求三角形面积
</code></pre>
<h2 id="_15"><strong>线</strong></h2>
<h3 id="_16"><strong>直线</strong></h3>
<p>对于直线，我们一般记录其方程，如一般式 <span class="arithmatex">\(Ax+By+C=0\)</span> ，斜截式 <span class="arithmatex">\(y=kx+b\)</span> 等，针对题目所需采取不同的形式。</p>
<p>更简便的，我们可以直接记录直线上的两点，这样在计算一些位置关系时更方便。</p>
<h4 id="_17"><strong>求两直线交点</strong></h4>
<p>首先我们要判断两直线是否相交，因为我们记录的是直线上两个点，很容易算出其方向向量，算出方向向量后取叉乘的模，如果为 <span class="arithmatex">\(0\)</span> 则两直线平行。</p>
<pre><code class="language-cpp">// 判断直线是否平行
bool line::is_parallel(const line&amp; b)const
{
    return abs(dVec * b.dVec) &lt;= eps;
}
</code></pre>
<p>确定两直线相交后，我们就可以计算交点了。</p>
<p>计算过程需要初中三角形正弦定理的知识。</p>
<div class="arithmatex">\[
\frac{a}{\sin{A}}=\frac{b}{\sin{B}}=\frac{c}{\sin{C}}
\]</div>
<p>首先我们用 <span class="arithmatex">\(\vec{a}\)</span> 表示向量 <span class="arithmatex">\(\vec{pC}\)</span> , 用 <span class="arithmatex">\(\vec{b}\)</span> 表示方向向量 <span class="arithmatex">\(\vec{pD}\)</span> 。</p>
<figure>
  <img alt="Image title" src="../img/04.png" width="400" />
</figure>
<!-- <div align="center"><img src="./img/04.png"width="400"></div> -->

<p>但是这样好像看不出什么 ，连接 <span class="arithmatex">\(D,C\)</span> 两点。</p>
<figure>
  <img alt="Image title" src="../img/05.png" width="400" />
</figure>
<!-- <div align="center"><img src="./img/05.png"width="400"></div> -->

<p>我们用正弦定义可以写出下式：</p>
<div class="arithmatex">\[
\frac{|\vec{a}|}{\sin{\theta}}=\frac{|\vec{c}|}{\sin{\beta}}\\
~\\
|\vec{a}|=\left | \frac{|\vec{c}|\sin{\theta}}{\sin{\beta}} \right | 
\]</div>
<p><span class="arithmatex">\(\vec{c}\)</span> 我们可以通过 <span class="arithmatex">\(D，C\)</span> 两点得到， <span class="arithmatex">\(\sin{\theta}\)</span> 和 <span class="arithmatex">\(\sin{\beta}\)</span> 角可以通过两直线方向向量 <span class="arithmatex">\(\vec{AC},\vec{BD}\)</span> 和 <span class="arithmatex">\(\vec{c}\)</span> 叉乘得到：</p>
<div class="arithmatex">\[
\sin{\theta}=\frac{\vec{BD}\times \vec{c}}{|\vec{BD}||\vec{c}|}\\
\]</div>
<div class="arithmatex">\[
\sin{\beta}=\frac{\vec{AC}\times \vec{BD}}{|\vec{AC}||\vec{BD}|}
\]</div>
<p>我们将两个正弦值带入上式，化简得：</p>
<div class="arithmatex">\[
|\vec{a}|= |\vec{AC}| \cdot \frac{| \vec{BD}\times \vec{c}  |}{| \vec{AC}\times \vec{BD} |} 
\]</div>
<p>为了方便表示我们令 $K=\frac{| \vec{BD}\times \vec{c}  |}{| \vec{AC}\times \vec{BD} |} $，所以：</p>
<div class="arithmatex">\[
|\vec{a}|=|\vec{AC}|\cdot K
\]</div>
<p>其中 <span class="arithmatex">\(\vec{a}\)</span> 和 <span class="arithmatex">\(\vec{AC}\)</span> 是平行的，那么 <span class="arithmatex">\(\vec{a}\)</span> 可以通过 <span class="arithmatex">\(\vec{AC}\)</span> 数乘得到：</p>
<div class="arithmatex">\[
\vec{a} = K\cdot \vec{AC}
\]</div>
<p>知道 <span class="arithmatex">\(\vec{a}\)</span> 后，那么交点就相当于点 <span class="arithmatex">\(C\)</span> 沿着 <span class="arithmatex">\(\vec{a}\)</span> 移动 <span class="arithmatex">\(|\vec{a}|\)</span> 的长度，就得到交点 <span class="arithmatex">\(p\)</span>。</p>
<p>沿着向量移动，我可以转化成向量加法，我们把点 <span class="arithmatex">\(p\)</span>，看成向量 <span class="arithmatex">\(\vec{Op}\)</span>，这里 <span class="arithmatex">\(O\)</span> 是原点，吧点 <span class="arithmatex">\(C\)</span> 看成 <span class="arithmatex">\(\vec{OC}\)</span>，那么 <span class="arithmatex">\(\vec{Op}\)</span> 可以写为：</p>
<div class="arithmatex">\[
\vec{Op}=\vec{OC}+\vec{a}\\
\]</div>
<div class="arithmatex">\[
\vec{Op}=\vec{OC}+K\cdot \vec{AC}
\]</div>
<pre><code class="language-cpp">// 求两直线交点
Point line::get_intersection(const line&amp; b) const
{
    // 直线平行返回无穷大
    if(is_parallel(b))
        return {INT_MAX,INT_MAX};

    // 带入公式
    Point c = x2 - b.x2;
    double K = (b.dVec * c) / (dVec * b.dVec);
    Point res = x2 + dVec * K;
    return res;
}
</code></pre>
<h3 id="_18"><strong>线段</strong></h3>
<p>和存储直线的方式一样。</p>
<h4 id="_19"><strong>求线段的交点</strong></h4>
<p>求线段交点就要判断它们端点之间的位置关系。</p>
<ul>
<li>所在直线相交</li>
</ul>
<p>这里我们先不考虑平行的情况。两个不平行的的线段如果有交点，那么任意一个线段的两个端点一定在另一个线段的两侧，如下图：</p>
<figure>
  <img alt="Image title" src="../img/07.png" width="200" />
</figure>
<!-- <div align="center"><img src="./img/07.png"width="200"></div> -->

<p>那么就要计算两对叉乘 <span class="arithmatex">\(\vec{AB}\times\vec{AC}，\vec{AB}\times \vec{AD}\)</span> 和 <span class="arithmatex">\(\vec{CD}\times\vec{CA}，\vec{CD}\times\vec{CB}\)</span> ，如果第一对叉乘是一正一负，那么说明 <span class="arithmatex">\(C,D\)</span> 在 <span class="arithmatex">\(AB\)</span> 直线的两端，第二对同理。</p>
<p>这里的 <span class="arithmatex">\(\vec{AB},\vec{CD}\)</span> 就是两个线段的方向向量，计算是拿方向向量替换即可。</p>
<p>如果两线段满足这个情况，那么直接调用直线交点计算即可。</p>
<ul>
<li>所在直线平行</li>
</ul>
<p>其次就考虑平行的情况，一般平行是没有交点的，但是要考虑共线的情况。这里我们规定当两个线段重合时，返回 <span class="arithmatex">\(y\)</span>值最小的，<span class="arithmatex">\(y\)</span> 值相等就返回 <span class="arithmatex">\(x\)</span> 值最小的。</p>
<p>共线又分为下面几种情况：</p>
<figure>
  <img alt="Image title" src="../img/08.png" width="700" />
</figure>
<!-- <div align="center"><img src="./img/08.png"width="700"></div> -->

<p>我们观察发现，这时我们只要判断线段 <span class="arithmatex">\(AB\)</span> 的上端点 <span class="arithmatex">\(B\)</span> 和线段 <span class="arithmatex">\(CD\)</span> 的下端点 <span class="arithmatex">\(C\)</span> 的位置关系即可。</p>
<p>如果 <span class="arithmatex">\(C\)</span> 位于 <span class="arithmatex">\(B\)</span> 的下端，则说明两个线段是有重合的。否则就是无重合的。</p>
<p>对于两个点位置的比较我们可以重载 <span class="arithmatex">\(&lt;\)</span> 操作符</p>
<pre><code class="language-cpp">// 重载 &lt; 方便找线段交点
bool operator&lt;(const Point &amp;b) const
{
    if (y == b.y)
        return x &lt; b.x;
    return y &lt; b.y;
}
</code></pre>
<p>如此重载如果两个线段都是与 <span class="arithmatex">\(x\)</span> 轴平行重合也可以找出正确的端点。</p>
<pre><code class="language-cpp">Point mi = max(min(x1, x2), min(b.x1, b.x2));
Point ma = min(max(x1, x2), max(b.x1, b.x2));
// 判断两线段是否重合
if (ma.x &gt;= mi.x &amp;&amp; ma.y &gt;= mi.y)
    return mi;
</code></pre>
<hr />
<p>参考文章：</p>
<p><a href="https://oi-wiki.org/geometry/2d/#%E5%88%A4%E6%96%AD%E4%B8%80%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E4%BB%BB%E6%84%8F%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85%E9%83%A8">Oi Wiki</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.instant", "navigation.tabs", "navigation.path", "navigation.instant.progress"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>